<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>주사위</title>
    <style>
      .box {
        /* margin: 200px; */
        width: 500px;
        height: 400px;
        background-color: rgba(128, 128, 128, 0.274);
        /* display: flex; */
      }

      div > div {
        background-color: aquamarine;
        margin-top: 10px;
        display: flex;
      }
    </style>
  </head>
  <body>
    <script>
      let num = 1000 * 10;
      const total = 1000 * 10;
      const list = [0, 0, 0, 0, 0, 0];
      let list_total,
        d1,
        d2,
        d3,
        d4,
        d5,
        d6 = 0; // 주사위 총합 횟수 , 주사위 당 확률 변수
      const want = +prompt("조작할 확률을 입력하세요.") || 3;
      const choice = want; // 보정값 계산용;

      while (num > 0) {
        const ran = Math.floor(Math.random(2) * 6) + 1;
        const lucky = Math.random() * 100; // 0 ~ 100 중 하나
        d1 = ((list[0] / total) * 100).toFixed(0);
        d2 = ((list[1] / total) * 100).toFixed(0);
        d3 = ((list[2] / total) * 100).toFixed(0);
        d4 = ((list[3] / total) * 100).toFixed(0);
        d5 = ((list[4] / total) * 100).toFixed(0);
        d6 = ((list[5] / total) * 100).toFixed(0);
        if (ran === 1) {
          if (d2 < choice) {
            list[1] += 1;
          } else {
            list[0] += 1;
          }
        } else if (ran === 2) {
          if (d2 < choice) {
            list[1] += 1;
          } else {
            num++;
          }
        } else if (ran === 3) {
          if (d2 < choice) {
            list[1] += 1;
          } else {
            list[2] += 1;
          }
        } else if (ran === 4) {
          if (d2 < choice) {
            list[1] += 1;
          } else {
            list[3] += 1;
          }
        } else if (ran === 5) {
          if (d2 < choice) {
            list[1] += 1;
          } else {
            list[4] += 1;
          }
        } else if (ran === 6) {
          if (d2 < choice) {
            list[1] += 1;
          } else {
            list[5] += 1;
          }
        }

        num--;
      }

      list_total = list[0] + list[1] + list[2] + list[3] + list[4] + list[5];
      console.log(list[0] / total);
      document.body.innerHTML = `

        ${list}
        <br>
        ${list_total}
        <br>
            <table border="1">
        <tr>
          <th colspan="3">주사위 10,000 회 굴리기</th>
        </tr>
        <tr>
          <td></td>
          <td>나온 횟수</td>
          <td>주사위 확률</td>
        </tr>
        <tr>
          <td>주사위1</td>
          <td>${list[0]}</td>
          <td>${d1}%</td>
        </tr>

        <tr>
          <td>주사위2</td>
          <td>${list[1]}</td>
          <td>${d2}%</td>
        </tr>
        <tr>
          <td>주사위3</td>
          <td>${list[2]}</td>
          <td>${d3}%</td>
        </tr>
        <tr>
          <td>주사위4</td>
          <td>${list[3]}</td>
          <td>${d4}%</td>
        </tr>
        <tr>
          <td>주사위5</td>
          <td>${list[4]}</td>
          <td>${d5}%</td>
        </tr>
        <tr>
          <td>주사위6</td>
          <td>${list[5]}</td>
          <td>${d6}%</td>
        </tr>
        <tr>
          <td>검증</td>
          <td>${list_total}</td>
          <td>${((list_total / total) * 100).toFixed(0)}%</td>
        </tr>
      </table>
      <br>
      <button onclick="location.reload(true)">새로고침</button>
      <div class="box">
        <div class="bar" style="width:calc(${d1}%*1.5)">${d1}%</div>
        <div class="bar" style="width:calc(${d2}%*1.5)">${d2}%</div>
        <div class="bar" style="width:calc(${d3}%*1.5)">${d3}%</div>
        <div class="bar" style="width:calc(${d4}%*1.5)">${d4}%</div>
        <div class="bar" style="width:calc(${d5}%*1.5)">${d5}%</div>
        <div class="bar" style="width:calc(${d6}%*1.5)">${d6}%</div>
      </div>

        `;
    </script>
  </body>
</html>
